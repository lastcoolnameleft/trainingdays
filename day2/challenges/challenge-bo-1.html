<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Break Out #1: Deploy the Azure Dev College sample application to Azure # | Azure Developer College</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="">
    <link rel="preload" href="/trainingdays/assets/css/0.styles.62bd769a.css" as="style"><link rel="preload" href="/trainingdays/assets/js/app.50824011.js" as="script"><link rel="preload" href="/trainingdays/assets/js/2.2f47d838.js" as="script"><link rel="preload" href="/trainingdays/assets/js/14.8b9902dc.js" as="script"><link rel="prefetch" href="/trainingdays/assets/js/10.151cb87a.js"><link rel="prefetch" href="/trainingdays/assets/js/11.c85ea4bb.js"><link rel="prefetch" href="/trainingdays/assets/js/12.7a884dab.js"><link rel="prefetch" href="/trainingdays/assets/js/13.272351fb.js"><link rel="prefetch" href="/trainingdays/assets/js/15.4a76007a.js"><link rel="prefetch" href="/trainingdays/assets/js/16.200ee166.js"><link rel="prefetch" href="/trainingdays/assets/js/17.fd032e62.js"><link rel="prefetch" href="/trainingdays/assets/js/18.29b8041e.js"><link rel="prefetch" href="/trainingdays/assets/js/19.2f8a33d4.js"><link rel="prefetch" href="/trainingdays/assets/js/20.9b7df7de.js"><link rel="prefetch" href="/trainingdays/assets/js/21.f9765aa4.js"><link rel="prefetch" href="/trainingdays/assets/js/22.e2044a0c.js"><link rel="prefetch" href="/trainingdays/assets/js/23.a5e8a177.js"><link rel="prefetch" href="/trainingdays/assets/js/24.d3ff2f15.js"><link rel="prefetch" href="/trainingdays/assets/js/25.70e266ff.js"><link rel="prefetch" href="/trainingdays/assets/js/26.91e14861.js"><link rel="prefetch" href="/trainingdays/assets/js/27.21c77c35.js"><link rel="prefetch" href="/trainingdays/assets/js/28.6e654e53.js"><link rel="prefetch" href="/trainingdays/assets/js/29.c4c7cd60.js"><link rel="prefetch" href="/trainingdays/assets/js/3.d2416de3.js"><link rel="prefetch" href="/trainingdays/assets/js/30.89795041.js"><link rel="prefetch" href="/trainingdays/assets/js/31.04723a24.js"><link rel="prefetch" href="/trainingdays/assets/js/32.638bb870.js"><link rel="prefetch" href="/trainingdays/assets/js/33.c86b2866.js"><link rel="prefetch" href="/trainingdays/assets/js/34.bffb20d7.js"><link rel="prefetch" href="/trainingdays/assets/js/35.fc10a53b.js"><link rel="prefetch" href="/trainingdays/assets/js/36.61a45d91.js"><link rel="prefetch" href="/trainingdays/assets/js/37.75f35434.js"><link rel="prefetch" href="/trainingdays/assets/js/38.9d89ed8a.js"><link rel="prefetch" href="/trainingdays/assets/js/39.3c2d65ac.js"><link rel="prefetch" href="/trainingdays/assets/js/4.9dea503e.js"><link rel="prefetch" href="/trainingdays/assets/js/40.e031f652.js"><link rel="prefetch" href="/trainingdays/assets/js/41.c6130e9a.js"><link rel="prefetch" href="/trainingdays/assets/js/42.f35f9894.js"><link rel="prefetch" href="/trainingdays/assets/js/43.268fda96.js"><link rel="prefetch" href="/trainingdays/assets/js/44.9e0560cc.js"><link rel="prefetch" href="/trainingdays/assets/js/45.3c699688.js"><link rel="prefetch" href="/trainingdays/assets/js/46.28648f7e.js"><link rel="prefetch" href="/trainingdays/assets/js/47.5323c732.js"><link rel="prefetch" href="/trainingdays/assets/js/48.d3945e9d.js"><link rel="prefetch" href="/trainingdays/assets/js/49.024ec880.js"><link rel="prefetch" href="/trainingdays/assets/js/5.5a039577.js"><link rel="prefetch" href="/trainingdays/assets/js/50.1e11d47a.js"><link rel="prefetch" href="/trainingdays/assets/js/51.ab30eae8.js"><link rel="prefetch" href="/trainingdays/assets/js/52.6100b8ff.js"><link rel="prefetch" href="/trainingdays/assets/js/53.49c358dd.js"><link rel="prefetch" href="/trainingdays/assets/js/54.f046d0ba.js"><link rel="prefetch" href="/trainingdays/assets/js/55.1b89c46d.js"><link rel="prefetch" href="/trainingdays/assets/js/56.727a6857.js"><link rel="prefetch" href="/trainingdays/assets/js/57.a27d67d3.js"><link rel="prefetch" href="/trainingdays/assets/js/58.1e73e68a.js"><link rel="prefetch" href="/trainingdays/assets/js/59.1682dbd3.js"><link rel="prefetch" href="/trainingdays/assets/js/6.8748b295.js"><link rel="prefetch" href="/trainingdays/assets/js/60.690fb75f.js"><link rel="prefetch" href="/trainingdays/assets/js/61.c2a929ac.js"><link rel="prefetch" href="/trainingdays/assets/js/62.8450cf52.js"><link rel="prefetch" href="/trainingdays/assets/js/7.5a52ec54.js"><link rel="prefetch" href="/trainingdays/assets/js/8.571094df.js"><link rel="prefetch" href="/trainingdays/assets/js/9.c6ef0889.js">
    <link rel="stylesheet" href="/trainingdays/assets/css/0.styles.62bd769a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/trainingdays/" class="home-link router-link-active"><!----> <span class="site-name">Azure Developer College</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/azuredevcollege/trainingdays" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/trainingdays/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/trainingdays/day1/" class="sidebar-link">Day 1 Azure Fundamentals &amp; Infrastructure</a></li><li><a href="/trainingdays/day2/" aria-current="page" class="sidebar-link">Day 2 Azure Development</a></li><li><a href="/trainingdays/day3/" class="sidebar-link">Day 3 Data and AI</a></li><li><a href="/trainingdays/day4/" class="sidebar-link">Day 4 Azure DevOps</a></li><li><a href="/trainingdays/day5/" class="sidebar-link">Day 5 Identity and Architecture</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="break-out-1-deploy-the-azure-dev-college-sample-application-to-azure"><a href="#break-out-1-deploy-the-azure-dev-college-sample-application-to-azure" class="header-anchor">#</a> Break Out #1: Deploy the Azure Dev College sample application to Azure</h1> <p>Now it's time to get familiar with our sample application. You will now clone the repository to your local machine, setup your &quot;local loop&quot; and deploy a frist version to Azure.</p> <p><img src="/trainingdays/assets/img/architecture_bo1.b12c560b.png" alt="architecture_bo1" title="architecture_bo1"></p> <h2 id="setup-local-loop"><a href="#setup-local-loop" class="header-anchor">#</a> Setup Local Loop</h2> <p>Clone the repository to your local machine. Run this command from a blank folder.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> clone https://github.com/azuredevcollege/trainingdays.git

Cloning into <span class="token string">'azure-developer-college'</span><span class="token punctuation">..</span>.
remote: Enumerating objects: <span class="token number">236</span>, done.
remote: Counting objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">236</span>/236<span class="token punctuation">)</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">178</span>/178<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">2473</span> <span class="token punctuation">(</span>delta <span class="token number">89</span><span class="token punctuation">)</span>, reused <span class="token number">177</span> <span class="token punctuation">(</span>delta <span class="token number">51</span><span class="token punctuation">)</span>, pack-reused <span class="token number">2237</span>
Receiving objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">2473</span>/2473<span class="token punctuation">)</span>, <span class="token number">22.78</span> MiB <span class="token operator">|</span> <span class="token number">16.39</span> MiB/s, done.
Resolving deltas: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">1392</span>/1392<span class="token punctuation">)</span>, done.
</code></pre></div><blockquote><p>Please check, that all the <a href="/trainingdays/day2/challenges/challenge-0.html">Prerequisites</a> are present on your machine.</p></blockquote> <p>Switch to the <em>azure-developer-college</em> folder and open VS Code:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ code <span class="token builtin class-name">.</span>
</code></pre></div><p>Open folder Day2/apps. In that folder, we will be concentrating on <em>dotnetcore/Scm</em> and <em>frontend/scmfe</em>.</p> <p><img src="/trainingdays/assets/img/bo1_code.53561b6a.png" alt="bo1_code" title="bo1_code"></p> <p>The first one contains the backend logic for working with <em>contacts</em> objects, the latter one contains the Single page Application (SPA) which is written in VueJS.</p> <p>Open each folder and get familiar with the code in there.</p> <blockquote><p>If you have any questions, reach out to one of the proctors.</p></blockquote> <h2 id="run-the-contacts-service-locally"><a href="#run-the-contacts-service-locally" class="header-anchor">#</a> Run the <em>Contacts</em> service locally</h2> <p>Now it's time to run the contacts API on your local machine. Therefore, a debug configuration has already been prepared for you. So, switch to the &quot;Debug&quot; view in Visual Studio Code and in the drop-down, choose <strong>Day2 - Launch SCM Contacts API</strong>. Click the &quot;Run&quot; button.</p> <p><img src="/trainingdays/assets/img/vscode_debug_contacts.3a7ea5e4.png" alt="vscode_debug_contacts" title="vscode_debug_contacts"></p> <p>If you correctly set up your machine, after a few seconds a browser window will open and show the Swagger UI for the <em>contacts</em> API.</p> <p>Get familiar with all the available operations and also test a few of them via the UI.</p> <p><img src="/trainingdays/assets/img/browser_swagger_contacts.8bef4036.png" alt="browser_swagger_contacts" title="browser_swagger_contacts"></p> <h3 id="preparing-the-spa-for-the-first-run"><a href="#preparing-the-spa-for-the-first-run" class="header-anchor">#</a> Preparing the SPA for the first run</h3> <p>To run the Single Page Application on your local machine, we first need to install all the neccessary Node packages via the Node Package Manager (NPM).</p> <p>On the command line, switch to the folder <em>apps/frontend/scmfe</em> and run the following command:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> <span class="token function">install</span>

<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
added <span class="token number">1281</span> packages from <span class="token number">895</span> contributors and audited <span class="token number">26623</span> packages <span class="token keyword">in</span> <span class="token number">24</span>.125s
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><p>Back in Visual Studio Code, we need to tell the SPA where to call the contacts service (the contacts API endpoint, as well as all other upcoming endpoint, can be dynamically configured per environment).</p> <p>Open the file <em>apps/frontend/scmfe/public/settings/settings.js</em> and make sure the property <em>endpoint</em> has the value <strong>http://localhost:5050</strong>.</p> <div class="language-json extra-class"><pre class="language-json"><code>var uisettings = <span class="token punctuation">{</span>
    <span class="token property">&quot;endpoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:5050/&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resourcesEndpoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;aiKey&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This file will be loaded during the startup of our application and will configure the contacts module to use our local service for contacts management.</p> <p>So, everything is in place now...let's start the application. Go back to the <em>Debug</em> view, choose <strong>Day2 - Launch Frontend</strong>.</p> <p><strong>IMPORTANT</strong>: Make sure the contacts API still runs!</p> <p>When you run the config, a local build will be kicked-off and after finishing, the Chrome Debugger will be launched.</p> <p>Again, get familiar with the application, open the contacts list, create a few contacts, edit a contact and delete one.</p> <p>If you want to, you can also test the mobile experience of the app by opening the Chrome Developer Tool and switching to a mobile user-agent.</p> <p><img src="/trainingdays/assets/img/browser_bo1.8af58e5f.png" alt="browser_bo1" title="browser_bo1"></p> <p><img src="/trainingdays/assets/img/browser_mobile_bo1.01aaa5e4.png" alt="browser_mobile_bo1" title="browser_mobile_bo1"></p> <h2 id="deploy-to-azure"><a href="#deploy-to-azure" class="header-anchor">#</a> Deploy to Azure</h2> <p>We have now been able to run the application locally. Of course, we want to have it in Azure. In this first Break Out, we only deploy the <em>Contacts</em> API to Azure and run the SPA on our local machine.</p> <p>So, first of all, let's deploy the backend to Azure. You already know how to do it (<a href="/trainingdays/day2/challenges/challenge-1.html">Challenge 1 - Azure Web Applications</a> is your &quot;cheat sheet&quot;), so here is just an overview:</p> <ol><li>create a new resource group, name it e.g. <strong>scm-breakout-rg</strong>, location <em>West Europe</em></li> <li>create an Azure Web App (OS: <strong>Windows</strong>, RuntimeStack: <strong>.NET Core 3.0</strong>, Size: <strong>B1</strong>, AppInsights is not needed at the moment). You can choose to use the Portal or the Azure CLI.</li> <li>deploy the Contacts API to Azure</li> <li>after deployment, check whether the API is running (open the Swagger UI)</li></ol> <blockquote><p><strong>Hint for Step 3</strong>: now that we have a lot of projects in our folder, VS Code is not able to determine which project to pick when deploying via the Azure Tools App Services extension. We first need to publish the project to a local folder and take that as our deployment source. There is already a predefined task for you, called <strong>day2publishScmContacts</strong> (btw, all tasks are defined in the <strong>.vscode</strong> folder). To run it, simply press <strong>F1</strong> and choose <strong>&quot;Tasks: Run Task&quot;</strong>. In the dropdown, select <strong>day2publishScmContacts</strong>. A release build will be started and the outputs placed in the folder <strong>apps/dotnetcore/Scm/Adc.Scm.Api/publish</strong> folder. Choose that folder when &quot;right-click-deploying&quot; from the Azure AppService extension (via &quot;Browse...&quot;).</p></blockquote> <p>When everything works as expected in Azure, go back to the <strong>settings.js</strong> file of your SPA and adjust the <strong>endpoint</strong> property. Enter the value of your newly deployed API for it, e.g. https://mynewcontactsapi.azurewebsites.net/.</p> <p>Open the browser and check, if your application still works as expected.</p> <h2 id="finished-before-time"><a href="#finished-before-time" class="header-anchor">#</a> Finished before Time?</h2> <p>Try adding slots to your app and deploy the service to the slot, afterwards swap it!</p> <h1 id="wrap-up"><a href="#wrap-up" class="header-anchor">#</a> Wrap-Up</h1> <p>We have now set up our local development environment. We cloned the repo, installed dependencies of the SPA, ran both services and deployed the contacts API to Azure.</p> <p>You can now proceed to the next challenge: <a href="/trainingdays/day2/challenges/challenge-2.html">Challenge 2 - Serverless</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azuredevcollege/trainingdays/edit/master/day2/challenges/challenge-bo-1.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/trainingdays/assets/js/app.50824011.js" defer></script><script src="/trainingdays/assets/js/2.2f47d838.js" defer></script><script src="/trainingdays/assets/js/14.8b9902dc.js" defer></script>
  </body>
</html>
