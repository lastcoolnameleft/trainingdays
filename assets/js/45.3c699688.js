(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{603:function(t,e,r){"use strict";r.r(e);var n=r(42),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"challenge-9-networking-connect-two-virtual-networks-using-azure-vnet-peering"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#challenge-9-networking-connect-two-virtual-networks-using-azure-vnet-peering"}},[t._v("#")]),t._v(" Challenge 9: Networking: Connect Two Virtual Networks Using Azure VNET Peering")]),t._v(" "),r("p",[r("RouterLink",{attrs:{to:"/day1/"}},[t._v("back")])],1),t._v(" "),r("h2",{attrs:{id:"here-is-what-you-will-learn"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#here-is-what-you-will-learn"}},[t._v("#")]),t._v(" Here is what you will learn")]),t._v(" "),r("ul",[r("li",[t._v("How to connect 2 virtual networks with Azure VNET Peering")])]),t._v(" "),r("p",[t._v("Our "),r("strong",[t._v("final architecture")]),t._v(" should look like this:\n"),r("img",{attrs:{src:"vnetpeeringarchitecture.png",alt:"Final architecture"}}),r("br"),t._v("\nAt "),r("strong",[t._v("first")]),t._v(" you will deploy the "),r("em",[t._v("start environment")]),t._v(" and in the "),r("strong",[t._v("second")]),t._v(" step you will implement the "),r("strong",[t._v("peering")]),t._v(".")]),t._v(" "),r("h2",{attrs:{id:"_1-deploy-the-starting-point"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-deploy-the-starting-point"}},[t._v("#")]),t._v(" 1. Deploy the 'starting point'")]),t._v(" "),r("p",[t._v("In this directory there is an ARM-template which 2 virtual networks and 2 vms and its requirements (networking, disks,...).:")]),t._v(" "),r("p",[r("strong",[t._v("Deploy this scenario")]),t._v(" into your subscription by clicking on the\n"),r("a",{attrs:{href:"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FCSA-OCP-GER%2Fazure-developer-college%2Fmaster%2Fday1%2Fchallenges%2FChallenge%209%2FChallenge9Start.json"}},[r("img",{attrs:{src:"deploytoazure.png"}})]),t._v("\nbutton.")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("Name")]),t._v(" "),r("th",[t._v("Value")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("Resource group")]),t._v(" "),r("td",[r("strong",[t._v("(new)")]),t._v(" rg-VNETPeering")])]),t._v(" "),r("tr",[r("td",[t._v("Location")]),t._v(" "),r("td",[r("strong",[t._v("North Europe")])])]),t._v(" "),r("tr",[r("td",[t._v("Admin user")]),t._v(" "),r("td",[t._v("demouser")])]),t._v(" "),r("tr",[r("td",[t._v("Admin password")]),t._v(" "),r("td",[r("strong",[r("em",[t._v("some complex value")])])])]),t._v(" "),r("tr",[r("td",[t._v("Vm Size")]),t._v(" "),r("td",[r("strong",[t._v("Standard_B2s")]),t._v("  or try e.g. "),r("strong",[t._v("Standard_F2s_v2")])])]),t._v(" "),r("tr",[r("td",[t._v("Disk Sku")]),t._v(" "),r("td",[t._v("StandardSSD_LRS")])])])]),t._v(" "),r("p",[t._v("The result should look similar to this:"),r("br"),t._v(" "),r("img",{attrs:{src:"armdeploymentresult.PNG",alt:"Deployment result"}})]),t._v(" "),r("h2",{attrs:{id:"_2-implement-the-vnet-peering"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-implement-the-vnet-peering"}},[t._v("#")]),t._v(" 2. Implement the VNET peering")]),t._v(" "),r("p",[t._v("You need to create the peerings on each virtual network:")]),t._v(" "),r("ul",[r("li",[t._v("VNET1 ---\x3e VNET2")]),t._v(" "),r("li",[t._v("VNET2 ---\x3e VNET1")])]),t._v(" "),r("p",[t._v("The wizard in the portal is "),r("em",[t._v("smart enough")]),t._v(" to let create 2 peerings in a single step. Select e.g. VNET1 as starting point:")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v('[Azure Portal] -> Resource Groups -> "rg-VNETPeering" -> "VNET1" -> Peerings -> Add\n')])])]),r("table",[r("thead",[r("tr",[r("th",[t._v("Name")]),t._v(" "),r("th",[t._v("Value")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("Name of the peering from VNET1 to remote virtual network")]),t._v(" "),r("td",[r("strong",[t._v("VNET1toVNET2")])])]),t._v(" "),r("tr",[r("td",[t._v("Virtual Network")]),t._v(" "),r("td",[r("strong",[t._v("VNET2")])])]),t._v(" "),r("tr",[r("td",[t._v("Name of the peering from VNET2 to VNET1")]),t._v(" "),r("td",[r("strong",[t._v("VNET2toVNET1")])])])])]),t._v(" "),r("p",[r("img",{attrs:{src:"vnetpeeringsettings.PNG",alt:"VNET Peering settings"}})]),t._v(" "),r("h2",{attrs:{id:"_3-check-if-the-peering-works"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-check-if-the-peering-works"}},[t._v("#")]),t._v(" 3. Check if the peering works")]),t._v(" "),r("p",[t._v("Connect to one vm through RDP using its public ip address: e.g. VMonVNET1 through")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v('[Azure Portal] -> Virtual Machines -> "VMonVNET1" -> Connect\n')])])]),r("p",[r("strong",[t._v("User")]),t._v(": demouser"),r("br"),t._v(" "),r("strong",[t._v("PWD")]),t._v(": %your deployment password%")]),t._v(" "),r("p",[r("strong",[t._v("Open a command prompt and ping the other vm")]),t._v(" using its internal IP: In our case VMonVNET2 - should be 192.168.100.4:"),r("br"),t._v(" "),r("img",{attrs:{src:"vnetpeeringtest.PNG",alt:"VNET Peering ping test"}})]),t._v(" "),r("h2",{attrs:{id:"cleanup"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#cleanup"}},[t._v("#")]),t._v(" Cleanup")]),t._v(" "),r("p",[r("strong",[t._v("Delete the resource group")]),t._v(" "),r("em",[t._v("rg-VNETPeering")])]),t._v(" "),r("p",[r("RouterLink",{attrs:{to:"/day1/"}},[t._v("back")])],1)])}),[],!1,null,null,null);e.default=a.exports}}]);